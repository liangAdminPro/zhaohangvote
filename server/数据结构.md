# 投票系统
## 数据结构
### 系统用户 User

|字段|类型|描述|
|---|---|---|
|_id|String|用户ID|
|uid|String|用户账户唯一账户标识 手机号或者身份证号|
|level|String|用户级别 LV1普卡  LV2金卡 LV3金葵花 LV4钻石卡 LV5私人银行|
|customerType|String|客户是否持卡|
|mobile|String|手机号|
|idno|String|身份证号|
|name|String|姓名|
|sex|String|性别|
|state|Number|状态 0:正常 1:无效|
|XdParams|String||
|OriginalXdParams|String||
|createdAt|Date|创建时间|

### 后台管理账户 Admin

|字段|类型|描述|
|---|---|---|
|_id|String|账户ID|
|userId|String|用户ID|
|mobile|String|手机号/账号|
|password|String|密码*|
|salt|String|密码混淆|
|name|String|姓名|
|corpname|String|单位名称|
|initpwd|Boolean|初始密码|
|state|Number|状态 0:正常 1:无效|
|role|String|角色 0:普管 1:超管|
|createdAt|Date|创建时间|

### 投票活动 Vote

|字段|类型|描述|
|---|---|---|
|_id|String|活动ID|
|bindId|String|关联活动ID|
|title|String|标题|
|tag|String|标签|
|tagp|String|标签拼音|
|address|String|地点|
|cover|String|封面|
|posterbg|String|海报背景图|
|start|Number|开始时间|
|end|Number|结束时间|
|shareshorturl|String|分享短链|
|desc|String|规则介绍 富文本|
|rule|Object|投票规则|
|gcwrule|Object|广场舞投票规则|
|lotteryUrl|String|抽奖链接|
|lotteryDesc|String|抽奖介绍|
|formset|Object|自定义表单|
|state|Number|状态 0:正常 1:无效|
|recommend|Boolean|推荐 false:不推荐 true:推荐|
|publish|Boolean|发布状态 false:未发布 true:已发布|
|self_registration|Boolean|是否开启用户自主报名 默认不开启|
|createdAt|Number|创建时间|
|createdBy|String|创建者ID|

### 投票项目 Item

|字段|类型|描述|
|---|---|---|
|_id|String|项目ID|
|voteId|String|活动ID|
|userId|String|用户ID|
|titleprefix|String|队伍名/个人名 前缀|
|title|String|队伍名/个人名|
|linkman|String|负责人|
|linkphone|String|联系电话|
|cover|String|封面|
|images|[String]|精彩图片|
|videos|[String]|参赛视频|
|slogan|String|参赛口号 活动宣言 自我介绍|
|votecount|Number|得票数|
|sharecount|Number|分享数|
|viewcount|Number|浏览数|
|from|String||
|state|Number|状态 -1: 待审核 0:审核通过 1:拒绝 2:删除|
|uids|[String]|用户ID查询依据|
|createdAt|Date|创建时间|
|createdBy|String|创建者ID|

###  投票记录 Record

|字段|类型|描述|
|---|---|---|
|_id|String|记录ID|
|voteId|String|活动ID|
|itemId|String|项目ID|
|userId|String|用户ID|
|voteDate|String|投票日期|
|voteYear|String|投票日期-年|
|voteMonth|String|投票日期-月|
|voteDay|String|投票日期-日|
|voteTime|String|投票时间|
|voteHour|String|投票时间-时|
|votecount|Number|票数|
|createdAt|Date|投票时间|
|ip|String|投票ip|

### 上传文件 File

|字段|类型|描述|
|---|---|---|
|_id|String|文件ID|
|filename|String|文件名|
|originalname|String|原始文件名|
|mimetype|String|文件类型|
|url|String|文件路径|
|path|String|文件存储位置|
|size|Number|文件大小|
|ip|String|上传ip|
|voteId|String|活动ID|
|itemId|String|项目ID|
|state|Number|文件状态 0:正常 1:删除|
|createdAt|Date|上传时间|
|createdBy|String|创建者ID|

### 文件分段上传
|字段|类型|描述|
|---|---|---|
|_id|String|ID|
|filelist|[Object]|分段文件列表|
|filesize|Number|文件大小|
|createdAt|Date|创建时间|

### 白名单
|字段|类型|描述|
|---|---|---|
|_id|String|ID|
|voteId|String|活动ID|
|wid|String|手机号或者身份证号|
|level|String|白名单级别 W5 W10|
|phone|String|手机号|
|idno|String|手机号|
|name|String|姓名|
|birth|String|生日|
|state|Number|状态 0:正常 1:无效|
|createdAt|Date|添加时间|
|createdBy|String|创建者ID|

### 敏感字
|字段|类型|描述|
|---|---|---|
|_id|String|ID|
|word|String|关键字|
|state|Number|状态 0:正常 1:无效|

### 系统数据统计
|字段|类型|描述|
|---|---|---|
|_id|String|ID|
|voteId|String|活动ID|
|createdAt|Date|创建时间|
|updatedAt|Date|更新时间|
|year|String|年|
|month|String|月|
|day|String|日|
|newUserCount|Number|新用户|
|viewCount|Number|访问量|
|voteCount|Number|投票数|
|voteRecordCount|Number|投票记录数|
|voteUserCount|Number|投票用户|
|activeCount|Number|活跃数|
|activeUserCount|Number|活跃用户|

### 活跃用户
|字段|类型|描述|
|---|---|---|
|_id|String||
|voteId|String||
|userId|String||
|year|String|年|
|month|String|月|
|day|String|日|
|createtime|Number||

### 请求日志
|字段|类型|描述|
|---|---|---|
|_id|String||
|from|String||
|userId|String||
|headers|Object||
|cookies|Object||
|params|Object||
|query|Object||
|body|Object||
|result|Object||
|createtime|Number||